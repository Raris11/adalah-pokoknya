<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Scrapbook for Wafa</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Indie+Flower&family=Patrick+Hand&family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap');

        :root {
            --paper: #fdfaf3;
            --ink: #2d6a4f;
            --pink: #ff85a1;
            --accent: #7b2cbf;
            --tape: rgba(255, 133, 161, 0.4);
            --red: #dc2626;
            --red-dark: #991b1b;
        }

        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        body {
            background: linear-gradient(135deg, #ffd1dc 0%, #ffb7c5 50%, #ffa0b4 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Patrick Hand', cursive;
            color: #333;
            padding: 10px;
        }

        .floating-decor {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            z-index: 1;
            opacity: 0.5;
            animation: floatAnim 6s ease-in-out infinite;
        }

        @keyframes floatAnim {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-30px) rotate(15deg); }
        }

        .scrapbook-container {
            width: 100%;
            max-width: 400px;
            position: relative;
            z-index: 10;
        }

        .page {
            background: var(--paper);
            width: 100%;
            min-height: 600px;
            max-height: 90vh;
            border-radius: 15px;
            box-shadow: 
                0 25px 80px rgba(0,0,0,0.15),
                0 10px 40px rgba(255,105,180,0.2);
            position: relative;
            display: none;
            flex-direction: column;
            padding: 30px 25px;
            border: 1px solid #ddd;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .page::-webkit-scrollbar { width: 5px; }
        .page::-webkit-scrollbar-track { background: transparent; }
        .page::-webkit-scrollbar-thumb { background: #ddd; border-radius: 10px; }

        .page.active { 
            display: flex; 
            animation: pageSlideIn 0.8s cubic-bezier(0.645, 0.045, 0.355, 1); 
        }

        @keyframes pageSlideIn {
            from { opacity: 0; transform: translateX(50px) rotateY(-20deg); }
            to { opacity: 1; transform: translateX(0) rotateY(0); }
        }

        /* ===== KADO ANIMATION dengan EMOJI üéÅ ===== */
        .gift-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px 0;
        }

        .gift-box {
            font-size: 160px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            filter: drop-shadow(0 20px 40px rgba(255,105,180,0.4));
            animation: giftFloat 3s ease-in-out infinite;
            user-select: none;
            margin: 30px 0;
        }

        @keyframes giftFloat {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .gift-box:hover { 
            transform: scale(1.15) translateY(-10px) rotate(0deg);
            filter: drop-shadow(0 25px 50px rgba(255,105,180,0.6));
        }

        .gift-box:active {
            transform: scale(0.95);
        }

        .gift-box.opening {
            animation: giftOpen 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }

        @keyframes giftOpen {
            0% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1;
            }
            30% {
                transform: scale(1.3) rotate(15deg);
            }
            50% {
                transform: scale(1.2) rotate(-10deg);
            }
            70% {
                transform: scale(1.4) rotate(10deg);
            }
            100% { 
                transform: scale(2) rotate(0deg);
                opacity: 0;
            }
        }

        .gift-text {
            font-size: 1.2rem;
            color: var(--accent);
            margin-top: 20px;
            animation: textPulse 2s ease-in-out infinite;
        }

        @keyframes textPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* ===== AMPLOP MERAH (UPDATED) ===== */
        .envelope-scene {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px 20px;
            min-height: 550px;
        }

        .envelope-container {
            position: relative;
            width: 320px;
            height: 200px;
            margin: 50px auto;
            cursor: pointer;
            perspective: 1000px;
        }

        .letter-paper {
            position: absolute;
            width: 85%;
            height: 90%;
            background: white;
            left: 7.5%;
            top: 7.5%;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2;
            border-radius: 5px;
            overflow: hidden;
        }

        .envelope-container.opened .letter-paper {
            transform: translateY(-130px) scale(1.05);
            z-index: 10;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        }

        .letter-content {
            font-family: 'Dancing Script', cursive;
            font-size: 1.1rem;
            color: var(--accent);
            line-height: 1.6;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* AMPLOP MERAH dengan Glassmorphism */
        .envelope-back {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(220, 38, 38, 0.95) 0%, 
                rgba(185, 28, 28, 0.95) 100%
            );
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 0 0 10px 10px;
            bottom: 0;
            z-index: 4;
            box-shadow: 
                0 15px 40px rgba(220, 38, 38, 0.4),
                inset 0 -2px 10px rgba(0,0,0,0.2);
        }

        /* Flap Merah */
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 160px solid transparent;
            border-right: 160px solid transparent;
            border-top: 115px solid rgba(220, 38, 38, 0.95);
            transform-origin: top center;
            transition: transform 0.8s ease;
            z-index: 5;
            filter: drop-shadow(0 5px 15px rgba(220, 38, 38, 0.4));
        }

        .envelope-container.opened .envelope-flap {
            transform: rotateX(180deg);
            z-index: 1;
        }

        /* Segel Emas (Wax Seal) di tengah amplop */
        .envelope-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: #ffc940;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            border: 3px solid white;
            z-index: 6;
            transition: transform 0.3s ease;
        }

        .envelope-container:hover .envelope-seal {
            transform: translate(-50%, -50%) scale(1.1);
        }

        .envelope-hint {
            font-size: 1.05rem;
            color: var(--red);
            font-weight: 600;
            animation: hintPulse 2s ease-in-out infinite;
            margin-top: 20px;
            transition: opacity 0.3s ease;
        }

        .envelope-container.opened ~ .envelope-hint {
            opacity: 0;
            pointer-events: none;
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.7; transform: translateY(0); }
            50% { opacity: 1; transform: translateY(-5px); }
        }

        /* ===== DECORATIVE DETAILS ===== */
        .washi {
            position: absolute;
            width: 100px;
            height: 30px;
            background: var(--tape);
            box-shadow: 2px 2px 8px rgba(0,0,0,0.08);
            z-index: 100;
        }
        .washi.top { top: -8px; left: 50%; transform: translateX(-50%) rotate(3deg); }
        .washi.corner { top: 8px; right: -25px; transform: rotate(45deg); width: 110px; }

        .ring-binder {
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 25px;
            background-image: radial-gradient(circle, #333 5px, transparent 6px);
            background-size: 25px 35px;
            opacity: 0.12;
        }

        /* ===== BUTTONS ===== */
        .btn-action {
            background: linear-gradient(145deg, var(--pink), #ff6b8e);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(255, 133, 161, 0.4);
            align-self: center;
        }
        .btn-action:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 12px 28px rgba(255, 133, 161, 0.5);
        }
        .btn-action:active { transform: translateY(0); }

        /* ===== GAME SECTION ===== */
        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .game-title {
            font-family: 'Indie Flower';
            font-size: 2rem;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .game-status { 
            font-size: 1.2rem; 
            color: #666;
            font-weight: 600;
            margin-top: 10px;
        }

        .grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 10px; 
            width: 100%;
            max-width: 350px;
            margin: 0 auto;
        }

        .tile {
            aspect-ratio: 1;
            background: #fff;
            border: 2px solid #fce7f3;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .tile:hover { transform: scale(1.05); }
        .tile.flipped { transform: rotateY(180deg); }

        .tile-front, .tile-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 12px;
        }

        .tile-front { 
            background: linear-gradient(145deg, #fdf2f8, #fce7f3); 
            font-size: 1.8rem;
            color: var(--pink);
            font-weight: bold;
        }

        .tile-back { 
            background: white; 
            transform: rotateY(180deg); 
            font-size: 2.2rem;
        }

        /* ===== WISH PAGE ===== */
        .wish-content {
            text-align: center;
            padding: 10px 0;
        }

        .wish-title {
            font-family: 'Dancing Script';
            font-size: 2.8rem;
            color: var(--pink);
            margin-bottom: 20px;
        }

        .candle-container { 
            margin: 35px 0; 
            cursor: pointer;
        }

        .candle { 
            font-size: 6.5rem; 
            transition: all 0.6s ease; 
            filter: drop-shadow(0 0 25px rgba(255, 165, 0, 0.6));
            display: inline-block;
            animation: candleGlow 2s ease-in-out infinite;
        }

        @keyframes candleGlow {
            0%, 100% { filter: drop-shadow(0 0 25px rgba(255, 165, 0, 0.6)); }
            50% { filter: drop-shadow(0 0 35px rgba(255, 165, 0, 0.8)); }
        }

        .candle:hover { transform: scale(1.12); }

        .candle.blown { 
            filter: drop-shadow(0 5px 15px rgba(255,192,203,0.4));
            animation: blowEffect 0.8s ease-out;
        }

        @keyframes blowEffect {
            0% { transform: scale(1); }
            50% { transform: scale(1.25) rotate(8deg); }
            100% { transform: scale(1); }
        }

        .wish-instruction {
            font-size: 1.15rem;
            color: #666;
            line-height: 1.7;
            max-width: 320px;
            margin: 0 auto;
        }

        /* ===== MESSAGE PAGE ===== */
        .message-content {
            text-align: center;
            position: relative;
        }

        .photo-container {
            position: relative;
            display: inline-block;
            margin: 30px auto 25px;
        }

        .birthday-hat {
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%) rotate(-15deg);
            font-size: 3rem;
            z-index: 10;
            animation: hatWiggle 2s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));
        }

        @keyframes hatWiggle {
            0%, 100% { transform: translateX(-50%) rotate(-15deg); }
            50% { transform: translateX(-50%) rotate(-5deg); }
        }

        .polaroid-frame {
            background: white;
            padding: 15px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            border-radius: 50%;
            transition: transform 0.4s ease;
            width: 280px;
            height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .polaroid-frame:hover {
            transform: scale(1.05);
        }

        .polaroid-frame img { 
            width: 100%; 
            height: 100%;
            object-fit: cover;
            display: block; 
            background: linear-gradient(145deg, #ffd1e8, #ffc4dd);
            border-radius: 50%;
        }
        
        .long-text-area {
            text-align: left;
            font-size: 1.1rem;
            line-height: 1.75;
            color: var(--ink);
            padding: 18px;
            background: linear-gradient(145deg, rgba(255,255,255,0.6), rgba(253,242,248,0.4));
            border-radius: 12px;
            border-left: 4px solid var(--pink);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            min-height: 180px;
        }

        /* ===== TIRAI MERAH MELENGKUNG (UPDATED) ===== */
        .gallery-content {
            text-align: center;
        }

        .gallery-title {
            font-family: 'Indie Flower';
            font-size: 2.2rem;
            color: var(--red);
            margin-bottom: 8px;
            text-shadow: 2px 2px 6px rgba(220, 38, 38, 0.3);
        }

        .gallery-subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 20px;
        }

        .gallery-stage {
            position: relative;
            width: 100%;
            min-height: 300px;
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(145deg, #f9f9f9, #f0f0f0);
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        /* TIRAI MERAH MELENGKUNG */
        .curtain {
            position: absolute;
            top: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(to bottom, 
                #dc2626 0%, 
                #b91c1c 30%,
                #991b1b 60%,
                #7f1d1d 100%
            );
            z-index: 10;
            transition: transform 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 
                inset 0 0 30px rgba(0,0,0,0.3),
                0 0 40px rgba(220,38,38,0.4);
        }

        /* Batang Tirai Emas */
        .curtain::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 28px;
            background: repeating-linear-gradient(
                90deg,
                #d4af37 0,
                #d4af37 20px,
                #b8941c 20px,
                #b8941c 25px,
                #d4af37 25px,
                #d4af37 45px,
                #b8941c 45px,
                #b8941c 50px
            );
            box-shadow: 
                0 4px 12px rgba(0,0,0,0.3),
                inset 0 -2px 5px rgba(0,0,0,0.2);
            border-bottom: 2px solid #9d7a15;
        }

        /* Tekstur kain dengan lipatan vertikal */
        .curtain::after {
            content: '';
            position: absolute;
            top: 30px;
            bottom: 0;
            left: 0;
            right: 0;
            background-image: 
                repeating-linear-gradient(
                    90deg,
                    rgba(0,0,0,0.05) 0px,
                    transparent 3px,
                    transparent 15px,
                    rgba(0,0,0,0.05) 18px
                ),
                repeating-linear-gradient(
                    0deg,
                    rgba(0,0,0,0.08) 0,
                    transparent 2px,
                    transparent 30px
                );
            pointer-events: none;
        }

        /* Tirai Kiri dengan lengkungan */
        .curtain-left {
            left: 0;
            border-right: 4px solid rgba(0,0,0,0.35);
            clip-path: polygon(
                0 0,
                100% 0,
                96% 6%,
                100% 12%,
                96% 18%,
                100% 24%,
                96% 30%,
                100% 36%,
                96% 42%,
                100% 48%,
                96% 54%,
                100% 60%,
                96% 66%,
                100% 72%,
                96% 78%,
                100% 84%,
                96% 90%,
                100% 96%,
                92% 100%,
                0 100%
            );
        }

        /* Tirai Kanan dengan lengkungan */
        .curtain-right {
            right: 0;
            border-left: 4px solid rgba(0,0,0,0.35);
            clip-path: polygon(
                0 0,
                100% 0,
                100% 100%,
                8% 100%,
                0 96%,
                4% 90%,
                0 84%,
                4% 78%,
                0 72%,
                4% 66%,
                0 60%,
                4% 54%,
                0 48%,
                4% 42%,
                0 36%,
                4% 30%,
                0 24%,
                4% 18%,
                0 12%,
                4% 6%
            );
        }

        /* Highlight cahaya pada tirai */
        .curtain-left::before {
            box-shadow: 
                0 4px 12px rgba(0,0,0,0.3),
                inset 0 -2px 5px rgba(0,0,0,0.2),
                inset 5px 0 15px rgba(255,255,255,0.1);
        }

        .curtain-right::before {
            box-shadow: 
                0 4px 12px rgba(0,0,0,0.3),
                inset 0 -2px 5px rgba(0,0,0,0.2),
                inset -5px 0 15px rgba(255,255,255,0.1);
        }

        .curtain-left.open { 
            transform: translateX(-102%);
        }
        
        .curtain-right.open { 
            transform: translateX(102%);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            padding: 10px;
            opacity: 0;
            transform: scale(0.85);
            transition: all 1.3s 1s ease;
        }

        .gallery-grid.show {
            opacity: 1;
            transform: scale(1);
        }

        .scrap-img {
            background: white;
            padding: 10px;
            padding-bottom: 30px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            transform: rotate(var(--rot));
            transition: all 0.4s ease;
            border-radius: 3px;
            heighht : fit-content;
        }

        .scrap-img:hover {
            transform: rotate(0deg) scale(1.08);
            box-shadow: 0 12px 30px rgba(0,0,0,0.2);
            z-index: 5;
        }

        .scrap-img img { 
            width: 100%; 
            height: 85px; 
            object-fit: cover;
            border-radius: 3px;
            display: block;
        }

        .final-message {
            font-family: 'Dancing Script';
            font-size: 2.2rem;
            color: var(--pink);
            margin-top: 25px;
            text-shadow: 0 3px 10px rgba(255, 133, 161, 0.3);
        }

        canvas#confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* ===== MUSIC CONTROL ===== */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(255,107,157,0.5);
            z-index: 1000;
            transition: all 0.3s ease;
            animation: musicPulse 2s ease-in-out infinite;
        }

        @keyframes musicPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 8px 25px rgba(255,107,157,0.5); }
            50% { transform: scale(1.05); box-shadow: 0 10px 30px rgba(255,107,157,0.7); }
        }

        .music-control:hover {
            transform: scale(1.1);
        }

        .music-control:active {
            transform: scale(0.95);
        }

        .music-icon {
            font-size: 1.8rem;
            animation: spin 3s linear infinite;
        }

        .music-control.paused .music-icon {
            animation: none;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <canvas id="confetti"></canvas>

    <!-- Music Control Button -->
    <div class="music-control" id="musicControl" onclick="toggleMusic()">
        <div class="music-icon">üéµ</div>
    </div>

    <div class="floating-decor" style="top: 8%; left: 5%; animation-delay: 0s;">üå∏</div>
    <div class="floating-decor" style="top: 12%; right: 8%; animation-delay: 1s;">üíñ</div>
    <div class="floating-decor" style="bottom: 18%; left: 8%; animation-delay: 2s;">‚ú®</div>
    <div class="floating-decor" style="bottom: 12%; right: 5%; animation-delay: 1.5s;">üåº</div>

    <audio id="bgMusic" loop>
        <source src="audio1.mp3" type="audio/mpeg">
    </audio>

    <div class="scrapbook-container">

        <!-- PAGE 0: KADO dengan EMOJI üéÅ -->
        <div class="page active" id="page0">
            <div class="gift-wrapper">
                <h1 style="font-family: 'Dancing Script'; font-size: 2.5rem; color: var(--pink); margin-bottom: 10px;">Halo Achihuyyyyyy</h1>
                <div class="gift-box" id="giftBox" onclick="openGift()">üéÅ</div>
                <p class="gift-text">‚ú® Ketuk kado untuk membuka ‚ú®</p>
            </div>
        </div>

        <!-- PAGE 0b: AMPLOP MERAH -->
        <div class="page" id="page0b">
            <div class="envelope-scene">
                <div class="envelope-container" id="envelopeBox" onclick="openEnvelope()">
                    <div class="letter-paper">
                        <div class="letter-content">
                            <p style="font-size: 1.3rem; margin-bottom: 8px;">üíñ</p>
                            <p style="font-size: 1.3rem; margin-bottom: 10px; font-weight: 600;">Dear Achiraa,</p>
                            <p style="font-size: 0.95rem; line-height: 1.5;">
                                31 Desember 2025<br>Do you remember?!<br><br>
                                Yeah‚Ä¶<br>that‚Äôs your day ‚ú®<br><br>
                                üå∏
                            </p>
                        </div>
                    </div>
                    <div class="envelope-back"></div>
                    <div class="envelope-flap"></div>
                    <div class="envelope-seal">‚ú®</div>
                </div>
                
                <p class="envelope-hint" id="envelopeHint">üíå Ketuk segel untuk membaca surat</p>
                <button class="btn-action" id="btnStartScrapbook" style="display:none;" onclick="nextPage(1, true)">nexttt üìñ</button>
            </div>
        </div>

        <!-- PAGE 1: WELCOME -->
        <div class="page" id="page1">
            <div class="ring-binder"></div>
            <div class="washi top"></div>
            <div style="text-align: center; padding: 40px 0;">
                <h1 style="font-family: 'Dancing Script'; font-size: 3.2rem; color: var(--pink); margin-bottom: 8px;">Achiiii</h1>
                <h2 style="font-family: 'Indie Flower'; font-size: 1.9rem; color: var(--accent); margin-bottom: 25px;">Achi‚Äôs Little Adventure</h2>
                <div style="font-size: 90px; margin: 30px 0;">üìî</div>
                <p style="font-size: 1.2rem; color: #666; line-height: 1.6; max-width: 300px; margin: 0 auto;">Sebuah perjalanan kecil penuh kejutanuntuk hari spesialmu</p>
                <button class="btn-action" onclick="nextPage(2)">Let's Goooo üé®</button>
            </div>
        </div>

        <!-- PAGE 2: MEMORY GAME -->
        <div class="page" id="page2">
            <div class="ring-binder"></div>
            <div class="game-header">
                <h2 class="game-title">Memory Game ‚ú®</h2>
                <p style="font-size: 1.05rem; color: #666;">Temukan semua pasangannya!</p>
                <div class="game-status">Pasangan: <span id="match-count">0</span> / 6</div>
            </div>
            <div class="grid" id="game-grid"></div>
        </div>

        <!-- PAGE 3: CONGRATS -->
        <div class="page" id="page3">
            <div class="ring-binder"></div>
            <div style="text-align: center; padding: 30px 0;">
                <h1 style="font-size: 5.5rem;">üéâ</h1>
                <h2 style="font-family: 'Indie Flower'; font-size: 2.5rem; color: var(--pink); margin: 20px 0;">Congratss Achiiii</h2>
                <p style="font-size: 1.25rem; color: #666; line-height: 1.7; max-width: 300px; margin: 0 auto 30px;">semua pasangan berhasil ketemu! tinggal satu yang belum‚Ä¶ punyamu. ga ya sjsksnsjbbb. lanjut dulu sebelum kepikiran</p>
                <button class="btn-action" onclick="nextPage(4)">Lanjut üêæ</button>
            </div>
        </div>

        <!-- PAGE 4: WISH -->
        <div class="page" id="page4">
            <div class="ring-binder"></div>
            <div class="washi corner"></div>
            <div class="wish-content">
                <h2 class="wish-title">Make a Wish üåü</h2>
                <div class="candle-container" onclick="blowCandle()">
                    <div id="candle-icon" class="candle">üéÇ</div>
                </div>
                <p id="wish-instruction" class="wish-instruction">Pejamkan matamu dulu ya Achiii, bikin wish terbaik versi kamu, laluu.. <strong>sentuh kuenya</strong> buat niup lilin, siapa tau langsung di-ACC</p>
                <button id="btn-after-wish" class="btn-action" style="display:none;" onclick="nextPage(5)">Lihat Pesan Dariku üíå</button>
            </div>
        </div>

        <!-- PAGE 5: MESSAGE -->
        <div class="page" id="page5">
            <div class="ring-binder"></div>
            <div class="message-content">
                <div class="photo-container">
                    <div class="birthday-hat">üéâ</div>
                    <div class="polaroid-frame">
                        <img src="achii1.jpeg" alt="Achii Photo">
                    </div>
                </div>
                <div class="long-text-area" id="typing-msg"></div>
                <button id="btn-to-gallery" class="btn-action" style="display:none;" onclick="nextPage(6)">Lihat Galeri Foto üì∏</button>
            </div>
        </div>

        <!-- PAGE 6: GALLERY dengan TIRAI MERAH -->
        <div class="page" id="page6">
            <div class="ring-binder"></div>
            <div class="gallery-content">
                <h2 class="gallery-title">Sweet Memories</h2>
                <p class="gallery-subtitle">Every moment with you is a treasure üíñ</p>
                
                <div class="gallery-stage">
                    <div class="curtain curtain-left" id="curtainLeft"></div>
                    <div class="curtain curtain-right" id="curtainRight"></div>
                    
                    <div class="gallery-grid" id="galleryGrid">
                        <div class="scrap-img" style="--rot: -4deg;">
                            <img src="achii7.jpeg" alt="Memory 1">
                        </div>
                        <div class="scrap-img" style="--rot: 3deg;">
                            <img src="achii2.jpeg" alt="Memory 2">
                        </div>
                        <div class="scrap-img" style="--rot: -2deg;">
                            <img src="achii3.jpeg" alt="Memory 3">
                        </div>
                        <div class="scrap-img" style="--rot: 5deg;">
                            <img src="achii4.jpeg" alt="Memory 4">
                        </div>
                        <div class="scrap-img" style="--rot: -3deg;">
                            <img src="achii5.jpeg" alt="Memory 5">
                        </div>
                        <div class="scrap-img" style="--rot: 2deg;">
                            <img src="achii6.jpeg" alt="Memory 6">
                        </div>
                    </div>
                </div>

                <button class="btn-action" id="btnOpenCurtain" onclick="openCurtain()">Buka Tirai üé≠</button>
                <div class="final-message">Happy Birthday, Achii! üéâ</div>
            </div>
        </div>

    </div>

    <script>
        const audio = document.getElementById('bgMusic');
        const longMessage = "Happy birthday Achihuyyyyyy üéâüéÇ makasih ya udah mau dengerin dan baca ceritaku yang kadang kepanjangan, kadang nggak penting tapi tetep kamu baca juga (mau amat si), selamat ya sekarang resmi berkepala 2 ü´° semoga makin dewasa tapi jangan terlalu serius ci nanti capek sendiri, di umur 20 ini semoga kamu selalu sehat, makin kuat ngadepin semester 4, langkahnya dimudahin, semua yang kamu usahain pelan-pelan berhasil, rezekinya lancar, kariernya jalan, hidupnya lebih ringan(orangnya juga udh ringan), dan semoga ke depannya nggak ketemu cowok-cowok berengsek lagi, intinya selamat ulang tahun ya semoga tahun ini lebih banyak ketawa daripada pusing dan banyak duit intinyaa krna bnyak mie ayam yang harus di ekspolreeee HHHHHHHHHH.OOYAA SELAMAT JADI BENBAN WKWKWKWKWKKWKWK";

        // === MUSIC CONTROL ===
        function toggleMusic() {
            const musicControl = document.getElementById('musicControl');
            if (audio.paused) {
                audio.play();
                musicControl.classList.remove('paused');
            } else {
                audio.pause();
                musicControl.classList.add('paused');
            }
        }

        // Auto-play music when envelope opens
        function startMusic() {
            audio.play().catch(e => {
                console.log('Auto-play prevented. Click music button to play.');
                document.getElementById('musicControl').classList.add('paused');
            });
        }

        // === KADO OPENING ===
        function openGift() {
            const giftBox = document.getElementById('giftBox');
            if (!giftBox.classList.contains('opening')) {
                // PERINTAH PENTING:
                const audio = document.getElementById('bgMusic');
                audio.play().catch(e => console.log("Musik butuh klik user")); 
                
                giftBox.classList.add('opening');
                setTimeout(() => {
                    nextPage('0b');
                }, 2200);
            }
        }

        // === AMPLOP OPENING ===
        function openEnvelope() {
            const envelope = document.getElementById('envelopeBox');
            const hint = document.getElementById('envelopeHint');
            const btn = document.getElementById('btnStartScrapbook');
            
            if (!envelope.classList.contains('opened')) {
                envelope.classList.add('opened');
                startMusic(); // Auto-play Beautiful Things
                setTimeout(() => {
                    hint.style.display = 'none';
                    btn.style.display = 'inline-block';
                }, 1400);
            }
        }

        // === NAVIGATION ===
        function nextPage(num, startMusic = false) {
            if(startMusic) {
                audio.play().catch(e => console.log('Audio play failed'));
            }
            
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const next = document.getElementById('page' + num);
            next.classList.add('active');

            if(num === 2) setupGame();
            if(num === 5) startTyping();
        }

        // === MEMORY GAME ===
        function setupGame() {
            const icons = ['üå∏', 'üíñ', 'üåº', 'üå∑', '‚ú®', 'üçÄ'];
            let deck = [...icons, ...icons].sort(() => Math.random() - 0.5);
            const grid = document.getElementById('game-grid');
            grid.innerHTML = '';
            let flipped = [];
            let matched = 0;

            deck.forEach(emoji => {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.innerHTML = `<div class="tile-front">?</div><div class="tile-back">${emoji}</div>`;
                tile.onclick = () => {
                    if(flipped.length < 2 && !tile.classList.contains('flipped')) {
                        tile.classList.add('flipped');
                        flipped.push(tile);
                        if(flipped.length === 2) {
                            setTimeout(() => {
                                if(flipped[0].innerText === flipped[1].innerText) {
                                    matched++;
                                    document.getElementById('match-count').innerText = matched;
                                    if(matched === 6) {
                                        setTimeout(() => {
                                            launchConfetti();
                                            setTimeout(() => nextPage(3), 800);
                                        }, 600);
                                    }
                                } else {
                                    flipped.forEach(t => t.classList.remove('flipped'));
                                }
                                flipped = [];
                            }, 800);
                        }
                    }
                };
                grid.appendChild(tile);
            });
        }

        // === WISH FEATURE ===
        function blowCandle() {
            const candle = document.getElementById('candle-icon');
            const instruction = document.getElementById('wish-instruction');
            const btn = document.getElementById('btn-after-wish');
            
            if(!candle.classList.contains('blown')) {
                candle.innerHTML = "üç∞";
                candle.classList.add('blown');
                instruction.innerHTML = "‚ú® Permintaanmu sudah dikirim ke langit! Semoga terkabul ya... üí´";
                btn.style.display = "inline-block";
                launchConfetti();
            }
        }

        // === TYPING EFFECT ===
        function startTyping() {
            let i = 0;
            const target = document.getElementById('typing-msg');
            target.innerHTML = "";
            
            function type() {
                if (i < longMessage.length) {
                    target.innerHTML += longMessage.charAt(i);
                    i++;
                    setTimeout(type, 50);
                } else {
                    document.getElementById('btn-to-gallery').style.display = "inline-block";
                }
            }
            type();
        }

        // === TIRAI OPENING ===
        function openCurtain() {
            document.getElementById('curtainLeft').classList.add('open');
            document.getElementById('curtainRight').classList.add('open');
            document.getElementById('galleryGrid').classList.add('show');
            document.getElementById('btnOpenCurtain').style.display = 'none';
            
            setTimeout(() => {
                launchConfetti();
            }, 1800);
        }

        // === CONFETTI ENGINE ===
        function launchConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const colors = ['#ff85a1', '#7b2cbf', '#48cae4', '#ffd166', '#06d6a0', '#ff6b8e'];
            let particles = [];

            for(let i=0; i<140; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: Math.random() * 9 + 4,
                    speedY: Math.random() * 6 + 2,
                    speedX: Math.random() * 4 - 2,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    rotation: Math.random() * 360,
                    rotationSpeed: Math.random() * 10 - 5
                });
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach((p, index) => {
                    p.y += p.speedY;
                    p.x += p.speedX;
                    p.rotation += p.rotationSpeed;

                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.rotation * Math.PI / 180);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                    ctx.restore();

                    if (p.y > canvas.height + 50) {
                        particles.splice(index, 1);
                    }
                });

                if (particles.length > 0) {
                    requestAnimationFrame(animate);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }

            animate();
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            const canvas = document.getElementById('confetti');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
